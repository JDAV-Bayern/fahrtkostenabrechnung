<section class="auth-playground container mx-auto max-w-4xl px-4 py-8">
  <article class="auth-card mt-6">
    @if (profile(); as data) {
      <header class="card-header">
        <h1 class="text-3xl font-semibold text-slate-900">
          Hey {{ profile()?.given_name }} ğŸ‘‹ğŸ¼
        </h1>
      </header>
      <dl class="profile-grid">
        <div>
          <dt>Dein Name</dt>
          <dd>{{ data.name || 'â€“' }}</dd>
        </div>
        <div>
          <dt>Deine Mitgliedsnummer</dt>
          <dd class="font-mono break-all">
            {{ data.jdav_membership_number || 'â€“' }}
          </dd>
        </div>
        <div>
          <dt>Deine E-Mail</dt>
          <dd>{{ data.email || 'â€“' }}</dd>
        </div>
      </dl>
    } @else {
      <p class="text-sm text-slate-500">
        Profil wird geladen â€¦ die Weiterleitung startet automatisch.
      </p>
    }
  </article>

  <article class="auth-card mt-4">
    <header class="card-header">
      <h2>Deine Schulungen</h2>
    </header>
    @if (profile(); as data) {
      @if (data.participated_trainings?.length) {
        <ul class="training-list">
          @for (
            training of sortTrainingsByDate(data.participated_trainings);
            track training.id
          ) {
            <li class="training-item">
              @let futureTraining = isTrainingInFuture(training);
              <div class="flex flex-col md:flex-row justify-between w-full">
                <div>
                  <p class="mb-5">
                    <span class="training-code">{{ training.code }}</span>
                  </p>
                  <p class="training-title">
                    {{ training.title }}
                  </p>
                  <p class="training-date">
                    Start am {{ training.date_from | date: 'dd.MM.yyyy' }}
                  </p>
                </div>
                <div class="flex flex-col justify-end gap-2 mt-4">
                  <button
                    (click)="navigateToFeedback(training)"
                    class="jdav-btn h-10"
                    [disabled]="futureTraining"
                    [title]="
                      futureTraining
                        ? 'Feedback kannst du nach dem Kurs abgeben.'
                        : ''
                    "
                  >
                    Feedback geben
                  </button>
                  <button
                    (click)="navigateToExpenseReport(training)"
                    class="jdav-btn h-10"
                  >
                    Fahrtkosten abrechnen
                  </button>
                </div>
              </div>
            </li>
          }
        </ul>
      } @else {
        <p class="text-sm text-slate-500">
          FÃ¼r dieses Konto liegen aktuell keine Fortbildungen vor.
        </p>
      }
    } @else {
      <p class="text-sm text-slate-500">
        Lade Fortbildungsdatenâ€¦ bitte einen Moment.
      </p>
    }
  </article>
</section>
