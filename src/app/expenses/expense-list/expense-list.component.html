<fieldset [formGroup]="parent">
  <ng-content></ng-content>
  <div
    cdkDropList
    [cdkDropListData]="form()"
    [cdkDropListEnterPredicate]="enterPredicate()"
  >
    <!-- TODO: readd [formArrayName]="form" -->
    @for (control of form().controls; track control) {
      <div cdkDrag [cdkDragData]="control" (cdkDragDropped)="drop($event)">
        @switch (control.value.type) {
          @case ('transport') {
            <jdav-transport-expense-card
              [expense]="control.value"
              (editRow)="openEditDialog(control)"
              (deleteRow)="deleteExpense($index)"
            />
          }
          @case ('material') {
            <jdav-material-expense-card
              [expense]="control.value"
              (editRow)="openEditDialog(control)"
              (deleteRow)="deleteExpense($index)"
            />
          }
        }
      </div>
    }
  </div>
  <button jdavButton type="button" (click)="openCreateDialog()">
    <span class="material-symbols-outlined">add</span>
    Auslage hinzuf√ºgen
  </button>
</fieldset>
